<!doctype html>

<html>

<head>
    <title>WASM customSections() test</title>
</head>

<body>
    <script>
        var importObject = {
          imports: {
            imported_func: function(arg) {
              console.log(arg);
            }
          }
        };

        fetch('simple-name-section.wasm').then(response =>
          response.arrayBuffer()
        ).then(bytes =>
          WebAssembly.instantiate(bytes, importObject)
        ).then(function(result) {
          result.instance.exports.exported_func();
          var nameSections = WebAssembly.Module.customSections(result.module, "name");
          console.log(nameSections);
          if (nameSections.length != 0) {
            console.log("Module contains a name section");
            console.log(nameSections[0]);
          };
        });
    </script>
</body>

</html>
